---
layout: post
title: Week 13, Enterprise and ACPI
---

# Open Source in Industry
This presentation was interesting both in its familiarity and in its breadth given that I worked as an intern doing work in open source for industry. I worked for the Linux Kernel team at Google which contributes to open source by pushing their changes to the upstream kernel. While I was interning on the team, they were busy transitioning to an "Upstream First" model--whereas prior they had decided to make their changes for their own in-house proprietary kernel first and foremost and then only afterwards pushing them upstream, they recognized that this put an extreme maintenance burden on them if they still wanted fixes and updates from upstream, and that in most cases it actually made more sense for them to push their changes upstream first and only when the changes landed in the upstream kernel pull them down. This definitely fell into the infrastructural part of open source in industry, but the way thtat the kernel engineers cooperated even with engineers at Meta and Amazon, two of Google's largest competitors, shows that open source can produce cooperation that benefits everyone, from competitors to users to individual contributors.

<!--more-->

Learning about the mechanisms by which open source can flourish in industry was quite interesting--and learning that even USBank, which to me seems like it might be the last kind of company to invest in open source, has goals in open source was fascinating to learn. I additionally have been doing work on a research project with Tandon professor Justin Cappos, whose Secure Systems lab also works on the Uptane framework [for distributing automotive grade linux to cars](https://ssl.engineering.nyu.edu/blog/2019-03-13-uptane-standardization). The particular business models are broad and show that open source need not be done solely out of the goodness of the developers' hearts--that there can be economic incentives to open source software. I generally believe that a system with a robust incentives scheme is a robust system and that as long as open source, whether through open core or SaaS or consulting/subscription offering or even donations, can manage to maintain that incentives scheme, it will continue to proliferate in usage.

# Accomplishments, Failures and Surprises

So far my accomplishments have been somewhat meager, but it looks like there might finally be a breakthrough next week. Most of our accomplishments as a group involve attempting to understand Linux and set our environment for it up. It is a massive project and trying to contribute to it is a tall order, but I think developing a greater understanding of the codebase has been an extremely worthwhile endeavor as the linux kernel underlies a lot of what makes our modern world run. The major accomplishments in terms of what I've been able to achieve towards a change so far have been in tracking down the issue in my current 2-in-1 laptop where there is no driver for the tablet mode switch--I have found the [ACPI](https://en.wikipedia.org/wiki/ACPI) driver for the tablet mode present in the [SSDT](https://www.kernel.org/doc/html/latest/arm64/acpi_object_usage.html), and have figured out how the kernel calls ACPI functions. However I expect to finalize this change and test next week. The challenges that we've come across have been many--for example both Jinli and I failed to be able to test some things that we needed to in order to implement certain changes to the kernel that we potentially could--for me it was the memory hotplug change that I described in my last post. The issue with fixing the memory hotplug cacheing TODO was really twofold: For one, the performance gain would likely be incredibly marginal, as we don't exactly expect multiple hotplugs a second, and incredibly niche, as hotplugs on IOMMU systems are not really a common use case as far as I know. Thus, it would be unlikely that the upstream community would be willing to include the code in the kernel, and would probably rather remove the TODO.  Also the bigger issue is that the testing environment was too difficult to configure. I was able to load QEMU with settings for memory hotplug, as documented in our wiki page prior. However, I was unable to actually make progress on the issue because the kernel did not properly load the new stick of virtual RAM. Jinli failed in being able to test the change that he was trying to make in the kernel because he was unable to test the performance on different systems because he didn't have those different systems. Our biggest surprise probably was just in general how difficult it was to find areas that could be easily contributed to in the Kernel. I have also been surprised in certain ways by the lack of specific documentation for a lot of very common tasks like adding a new ACPI driver. I probably was less surprised about certain things than Jinli given that I had worked on the kernel before. Overall I am very hopeful about my ability to actually progress on things this week.
